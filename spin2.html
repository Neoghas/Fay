<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Faylotto Spin Wheel</title>
<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js"></script>
<style>
  body {
    background: radial-gradient(circle, #111 0%, #000 100%);
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    height: 100vh;
    color: #fff;
    font-family: "Poppins", sans-serif;
    overflow: hidden;
  }

  svg {
    width: 350px;
    height: 350px;
    transform: rotate(-90deg);
  }

  .pointer {
    position: absolute;
    top: 15%;
    width: 0;
    height: 0;
    border-left: 15px solid transparent;
    border-right: 15px solid transparent;
    border-bottom: 25px solid red;
    z-index: 5;
  }

  #centerBtn {
    position: absolute;
    width: 80px;
    height: 80px;
    border-radius: 50%;
    background: gold;
    color: black;
    font-weight: bold;
    font-size: 18px;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    box-shadow: 0 0 20px gold;
  }

  .result {
    margin-top: 400px;
    font-size: 20px;
    text-align: center;
  }
</style>
</head>
<body>

<div class="pointer"></div>

<svg id="wheel" viewBox="0 0 500 500"></svg>
<div id="centerBtn">SPIN</div>
<div class="result" id="resultText">Press SPIN to play</div>

<script>
const prizes = [
  "1 ETH Jackpot",
  "0.7 ETH Big Win",
  "MacBook",
  "iPhone or Worth ETH",
  "0.1 ETH Monthly Prize",
  "0.05 ETH Monthly Prize",
  "0.005 ETH Weekly",
  "0.0005 ETH 4-Day Prize",
  "0.0001 ETH Daily Prize",
  "Won 2 LPoint",
  "Won 5 LPoint",
  "Won 7 LPoint"
];

const colors = [
  "#FFB703","#FB8500","#219EBC","#8ECAE6","#FF69B4","#90EE90",
  "#FFD700","#40E0D0","#ADFF2F","#FF6347","#9370DB","#20B2AA"
];

const svg = document.getElementById("wheel");
const resultText = document.getElementById("resultText");
const btn = document.getElementById("centerBtn");

const radius = 250;
const cx = 250;
const cy = 250;
const total = prizes.length;
const slice = 360 / total;

// Buat sektor pizza
for (let i = 0; i < total; i++) {
  const start = (Math.PI / 180) * (i * slice);
  const end = (Math.PI / 180) * ((i + 1) * slice);
  const x1 = cx + radius * Math.cos(start);
  const y1 = cy + radius * Math.sin(start);
  const x2 = cx + radius * Math.cos(end);
  const y2 = cy + radius * Math.sin(end);
  const largeArc = slice > 180 ? 1 : 0;
  const pathData = `
    M ${cx} ${cy}
    L ${x1} ${y1}
    A ${radius} ${radius} 0 ${largeArc} 1 ${x2} ${y2}
    Z
  `;

  const path = document.createElementNS("http://www.w3.org/2000/svg", "path");
  path.setAttribute("d", pathData);
  path.setAttribute("fill", colors[i % colors.length]);
  path.setAttribute("stroke", "white");
  path.setAttribute("stroke-width", "2");
  svg.appendChild(path);

  // Tambahkan label hadiah
  const angle = (i + 0.5) * slice;
  const textX = cx + (radius - 60) * Math.cos((Math.PI / 180) * angle);
  const textY = cy + (radius - 60) * Math.sin((Math.PI / 180) * angle);
  const text = document.createElementNS("http://www.w3.org/2000/svg", "text");
  text.setAttribute("x", textX);
  text.setAttribute("y", textY);
  text.setAttribute("fill", "black");
  text.setAttribute("font-size", "12");
  text.setAttribute("font-weight", "bold");
  text.setAttribute("text-anchor", "middle");
  text.setAttribute("alignment-baseline", "middle");
  text.setAttribute("transform", `rotate(${angle}, ${textX}, ${textY})`);
  text.textContent = prizes[i];
  svg.appendChild(text);
}

let spinning = false;

btn.addEventListener("click", () => {
  if (spinning) return;
  spinning = true;

  const randomIndex = Math.floor(Math.random() * prizes.length);
  const rotations = 5 + Math.random() * 3;
  const stopAngle = 360 * rotations - (randomIndex * slice + slice / 2);

  gsap.to(svg, {
    rotation: stopAngle,
    duration: 6,
    ease: "power4.out",
    transformOrigin: "50% 50%",
    onComplete: () => {
      spinning = false;
      resultText.innerHTML = `ðŸŽ‰ You won: <span style="color:gold">${prizes[randomIndex]}</span>`;
    }
  });
});
</script>
</body>
</html>
